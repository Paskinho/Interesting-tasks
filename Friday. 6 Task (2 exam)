import ReactDOM from 'react-dom/client';
import { applyMiddleware, combineReducers, legacy_createStore as createStore } from 'redux'
import thunk, { ThunkAction, ThunkDispatch } from 'redux-thunk'
import { Provider, TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux'
import React from 'react';

// Reducer
const initState = {
    goodMorning: [
        {id: 1, name: 'errors'},
        {id: 2, name: 'bugs'},
        {id: 3, name: 'fackups'},
        {id: 4, name: 'laziness'},
        {id: 5, name: 'work'},
    ] as { id: number, name: string }[]
}

type InitStateType = typeof initState

const appReducer = (state: InitStateType = initState, action: ActionsType): InitStateType => {
    switch (action.type) {
        case 'DELETE':
            return {
                ...state,
                goodMorning: state.goodMorning
                    .filter(g => g.id !== action.id)
            }
        default:
            return state
    }
}

// Store
const rootReducer = combineReducers({app: appReducer})

const store = createStore(rootReducer, applyMiddleware(thunk))
type RootState = ReturnType<typeof store.getState>
type AppDispatch = ThunkDispatch<RootState, unknown, ActionsType>
type AppThunk<ReturnType = void> = ThunkAction<ReturnType, RootState, unknown, ActionsType>
const useAppDispatch = () => useDispatch<AppDispatch>()
const useAppSelector: TypedUseSelectorHook<RootState> = useSelector

const deleteSome = (id: number) => (
    {type: 'DELETE', id} as const)
type ActionsType = ReturnType<typeof deleteSome>

// Components
export const Monday = () => {
    const goodMorning = useAppSelector(state => state.app.goodMorning)
    const dispatch = useAppDispatch()

    const mapped = goodMorning
        .map((p: any, i: number) => (
            <div key={i}>
                {p.name}
                <button onClick={
                    () => dispatch(
                    deleteSome(p.name))}> X </button>
            </div>
        ))

    return (
        <div>
            {mapped}
        </div>
    )
}


const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);
root.render(
    <Provider store={store}>
        <Monday/>
    </Provider>
);

// ðŸ“œ ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:
// ÐÐ° ÑÐºÑ€Ð°Ð½Ðµ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½ ÑÐ¿Ð¸ÑÐ¾Ðº Ð´ÐµÐ».
// ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ°ÐºÐ¾Ð¹-Ð½Ð¸Ð±ÑƒÐ´ÑŒ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ - Ñƒ Ð²Ð°Ñ Ð½Ðµ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ.
// ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ Ð¾ÑˆÐ¸Ð±ÐºÑƒ.
// Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¾Ñ‚Ð²ÐµÑ‚Ð° ÑƒÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½ÑƒÑŽ Ð²ÐµÑ€ÑÐ¸ÑŽ ÑÑ‚Ñ€Ð¾ÐºÐ¸
//
// ðŸ–¥ ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¾Ñ‚Ð²ÐµÑ‚Ð°: delete goodMorning


Correct answer (in 58 string)
deleteSome(p.id))}> X </button>

SOLUTION goodMorning: state.goodMorning.filter(g => g.name !== action.id)


