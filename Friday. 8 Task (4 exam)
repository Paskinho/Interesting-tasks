import ReactDOM from 'react-dom/client';
import React, { useState } from 'react'
import axios from 'axios'

export const Jpegs = () => {
  const [file, setFile] = useState<any>()
  const [formData, setFormData] = useState<any>()
  console.log(formData)

  const onChange = (e: any) => {
    const maybeFile = e.target.files?.[0]
    if (maybeFile) {
      if (maybeFile.type === 'image/jpeg') {
        setFile(maybeFile)
        const draftFormData = new FormData()
        draftFormData.append('myFile', maybeFile, maybeFile.name)
        setFormData(draftFormData)
        return
      } else alert('not .jpg!')
    }
    setFormData('')
    setFile('')
  }
  const onClick = () => {
    axios.post(
      'https://neko-back.herokuapp.com/file',
      file
    )
      .then(() => {
        alert('–í—ã —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å üöÄ')
      })
      .catch(() => {
        alert('üò• –ß—Ç–æ —Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫...')
      })
  }

  return (
    <div>
      <input
        type={'file'}
        onChange={onChange}

      />
      <div>updated: {file && new Date(file?.lastModified).toLocaleDateString()}</div>
      <div>size: {((file?.size || 0) / 1048576).toFixed(2) + 'MB'}</div>

      <button onClick={onClick} disabled={!file}>
        send
      </button>
    </div>
  )
}


const root = ReactDOM.createRoot(document.getElementById('root') as HTMLElement);
root.render(<Jpegs/>);

// üìú –û–ø–∏—Å–∞–Ω–∏–µ:
// –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–∞ backend.
// –ù–∞–π–¥–∏—Ç–µ –æ—à–∏–±–∫—É.
// –í –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ç–≤–µ—Ç–∞ —É–∫–∞–∂–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å—Ç—Ä–æ–∫–∏.
//
// üñ• –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞: value={file}
